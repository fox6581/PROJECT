{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport { createStore } from 'vuex';\nconst store = createStore({\n  state: {\n    cart: [],\n    likedProducts: [] // Список понравившихся товаров\n  },\n  mutations: {\n    addToCart(state, product) {\n      console.log('Добавление товара:', product.name);\n      const existingProduct = state.cart.find(item => item.id === product.id);\n      if (existingProduct) {\n        existingProduct.quantity++;\n      } else {\n        state.cart.push({\n          ...product,\n          quantity: 1\n        });\n      }\n    },\n    toggleLike(state, product) {\n      const index = state.likedProducts.findIndex(item => item.id === product.id);\n      if (index === -1) {\n        state.likedProducts.push(product); // Добавить в понравившиеся\n      } else {\n        state.likedProducts.splice(index, 1); // Удалить из понравившихся\n      }\n    },\n    removeFromCart(state, productId) {\n      const index = state.cart.findIndex(item => item.id === productId);\n      if (index !== -1) {\n        state.cart.splice(index, 1);\n      }\n    },\n    increaseQuantity(state, productId) {\n      const product = state.cart.find(item => item.id === productId);\n      if (product) {\n        product.quantity++;\n      }\n    },\n    decreaseQuantity(state, productId) {\n      const product = state.cart.find(item => item.id === productId);\n      if (product && product.quantity > 1) {\n        product.quantity--;\n      }\n    },\n    clearCart(state) {\n      state.cart = [];\n    }\n  },\n  actions: {\n    addToCart({\n      commit\n    }, product) {\n      commit('addToCart', product);\n    },\n    removeFromCart({\n      commit\n    }, productId) {\n      commit('removeFromCart', productId);\n    },\n    increaseQuantity({\n      commit\n    }, productId) {\n      commit('increaseQuantity', productId);\n    },\n    decreaseQuantity({\n      commit\n    }, productId) {\n      commit('decreaseQuantity', productId);\n    },\n    checkout({\n      commit\n    }) {\n      commit('clearCart');\n    },\n    toggleLike({\n      commit\n    }, product) {\n      commit('toggleLike', product);\n    }\n  },\n  getters: {\n    cart: state => state.cart,\n    totalPrice: state => {\n      return state.cart.reduce((total, item) => {\n        const price = item.discount_price ?? item.price;\n        return total + price * item.quantity;\n      }, 0);\n    },\n    likedProducts: state => state.likedProducts\n  }\n});\nexport default store;","map":{"version":3,"names":["createStore","store","state","cart","likedProducts","mutations","addToCart","product","console","log","name","existingProduct","find","item","id","quantity","push","toggleLike","index","findIndex","splice","removeFromCart","productId","increaseQuantity","decreaseQuantity","clearCart","actions","commit","checkout","getters","totalPrice","reduce","total","price","discount_price"],"sources":["C:/shopvue/front-vue3/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex';\r\n\r\nconst store = createStore({\r\n  state: {\r\n    cart: [],\r\n    likedProducts: [] // Список понравившихся товаров\r\n  },\r\n  mutations: {\r\n    addToCart(state, product) {\r\n      console.log('Добавление товара:', product.name);\r\n      const existingProduct = state.cart.find(item => item.id === product.id);\r\n      if (existingProduct) {\r\n        existingProduct.quantity++;\r\n      } else {\r\n        state.cart.push({ ...product, quantity: 1 });\r\n      }\r\n    },\r\n    toggleLike(state, product) {\r\n      const index = state.likedProducts.findIndex(item => item.id === product.id);\r\n      if (index === -1) {\r\n        state.likedProducts.push(product); // Добавить в понравившиеся\r\n      } else {\r\n        state.likedProducts.splice(index, 1); // Удалить из понравившихся\r\n      }\r\n    },\r\n    \r\n    removeFromCart(state, productId) {\r\n      const index = state.cart.findIndex(item => item.id === productId);\r\n      if (index !== -1) {\r\n        state.cart.splice(index, 1);\r\n      }\r\n    },\r\n    increaseQuantity(state, productId) {\r\n      const product = state.cart.find(item => item.id === productId);\r\n      if (product) {\r\n        product.quantity++;\r\n      }\r\n    },\r\n    decreaseQuantity(state, productId) {\r\n      const product = state.cart.find(item => item.id === productId);\r\n      if (product && product.quantity > 1) {\r\n        product.quantity--;\r\n      }\r\n    },\r\n    clearCart(state) {\r\n      state.cart = [];\r\n    }\r\n\r\n  },\r\n  actions: {\r\n    addToCart({ commit }, product) {\r\n      commit('addToCart', product);\r\n    },\r\n    removeFromCart({ commit }, productId) {\r\n      commit('removeFromCart', productId);\r\n    },\r\n    increaseQuantity({ commit }, productId) {\r\n      commit('increaseQuantity', productId);\r\n    },\r\n    decreaseQuantity({ commit }, productId) {\r\n      commit('decreaseQuantity', productId);\r\n    },\r\n    checkout({ commit }) {\r\n      commit('clearCart');\r\n    },\r\n    toggleLike({ commit }, product) {\r\n      commit('toggleLike', product);\r\n    }\r\n  },\r\n  getters: {\r\n    cart: (state) => state.cart,\r\n    totalPrice: (state) => {\r\n      return state.cart.reduce((total, item) => {\r\n        const price = item.discount_price ?? item.price;\r\n        return total + (price * item.quantity);\r\n      }, 0);\r\n    },\r\n    likedProducts: (state) => state.likedProducts\r\n\r\n  }\r\n});\r\n\r\nexport default store;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}