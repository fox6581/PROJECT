{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"filter\"\n};\nconst _hoisted_2 = {\n  class: \"price-inputs\"\n};\nconst _hoisted_3 = {\n  id: \"rating\",\n  class: \"slider\",\n  ref: \"sliderContainer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"Фильтр\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"label\", null, [_cache[8] || (_cache[8] = _createTextVNode(\" Минимальная цена: \")), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.minValue = $event),\n    onInput: _cache[1] || (_cache[1] = $event => $setup.onInputChange('min'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.minValue]])]), _createElementVNode(\"label\", null, [_cache[9] || (_cache[9] = _createTextVNode(\" Максимальная цена: \")), _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.maxValue = $event),\n    onInput: _cache[3] || (_cache[3] = $event => $setup.onInputChange('max'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.maxValue]])])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", {\n    class: \"block-min\",\n    ref: \"minBlock\",\n    onMousedown: _cache[4] || (_cache[4] = $event => $setup.startMoveRange('min')),\n    onTouchstart: _cache[5] || (_cache[5] = $event => $setup.startMoveRange('min'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), _createElementVNode(\"div\", {\n    class: \"color-range\",\n    style: _normalizeStyle($setup.colorRangeStyle)\n  }, null, 4 /* STYLE */), _createElementVNode(\"div\", {\n    class: \"block-max\",\n    ref: \"maxBlock\",\n    onMousedown: _cache[6] || (_cache[6] = $event => $setup.startMoveRange('max')),\n    onTouchstart: _cache[7] || (_cache[7] = $event => $setup.startMoveRange('max'))\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)], 512 /* NEED_PATCH */)])]);\n}","map":{"version":3,"names":["class","id","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createTextVNode","type","_cache","$event","$setup","minValue","onInput","onInputChange","maxValue","_hoisted_3","onMousedown","startMoveRange","onTouchstart","style","_normalizeStyle","colorRangeStyle"],"sources":["C:\\shopvue\\front-vue3\\src\\components\\Menu\\MenuPrice.vue"],"sourcesContent":["<template>\r\n    <div class=\"filter\">\r\n      <div>\r\n        <span>Фильтр</span>\r\n        <div class=\"price-inputs\">\r\n          <label>\r\n            Минимальная цена:\r\n            <input type=\"number\" v-model=\"minValue\" @input=\"onInputChange('min')\" />\r\n          </label>\r\n          <label>\r\n            Максимальная цена:\r\n            <input type=\"number\" v-model=\"maxValue\" @input=\"onInputChange('max')\" />\r\n          </label>\r\n        </div>\r\n        <div id=\"rating\" class=\"slider\" ref=\"sliderContainer\">\r\n          <div\r\n            class=\"block-min\"\r\n            ref=\"minBlock\"\r\n            @mousedown=\"startMoveRange('min')\"\r\n            @touchstart=\"startMoveRange('min')\"\r\n          ></div>\r\n          <div class=\"color-range\" :style=\"colorRangeStyle\"></div>\r\n          <div\r\n            class=\"block-max\"\r\n            ref=\"maxBlock\"\r\n            @mousedown=\"startMoveRange('max')\"\r\n            @touchstart=\"startMoveRange('max')\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, reactive, onMounted } from 'vue';\r\n  \r\n  const sliderContainer = ref(null);\r\n  const minBlock = ref(null);\r\n  const maxBlock = ref(null);\r\n  const colorRangeStyle = reactive({ left: '0px', width: '100px' });\r\n  \r\n  const minValue = ref(100); // Минимальная цена\r\n  const maxValue = ref(1000); // Максимальная цена\r\n  const rangeMin = 0;\r\n  const rangeMax =10000;\r\n  \r\n  let activeElement = null;\r\n  \r\n  function startMoveRange(type) {\r\n    activeElement = type;\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n    document.addEventListener('touchmove', onMouseMove);\r\n    document.addEventListener('touchend', onMouseUp);\r\n  }\r\n  \r\n  function getCoords(elem) {\r\n    const coords = elem.getBoundingClientRect();\r\n    return {\r\n      left: coords.left + window.pageXOffset,\r\n      width: coords.width\r\n    };\r\n  }\r\n  \r\n  function onMouseMove(e) {\r\n    const sliderCoords = getCoords(sliderContainer.value);\r\n    const blockCoords = activeElement === 'min' ? getCoords(maxBlock.value) : getCoords(minBlock.value);\r\n    let posX = e.touches ? e.touches[0].clientX : e.clientX;\r\n    let newLeft = posX - sliderCoords.left;\r\n  \r\n    if (activeElement === 'min') {\r\n      newLeft = Math.max(0, Math.min(newLeft, blockCoords.left - sliderCoords.left - minBlock.value.offsetWidth));\r\n      minBlock.value.style.left = `${newLeft}px`;\r\n      minValue.value = ((newLeft / sliderCoords.width) * (rangeMax - rangeMin) + rangeMin).toFixed(1);\r\n    } else {\r\n      newLeft = Math.min(sliderCoords.width - maxBlock.value.offsetWidth, Math.max(newLeft, blockCoords.left - sliderCoords.left));\r\n      maxBlock.value.style.left = `${newLeft}px`;\r\n      maxValue.value = ((newLeft / sliderCoords.width) * (rangeMax - rangeMin) + rangeMin).toFixed(1);\r\n    }\r\n  \r\n    updateColorRange();\r\n  }\r\n  \r\n  function onMouseUp() {\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseup', onMouseUp);\r\n    document.removeEventListener('touchmove', onMouseMove);\r\n    document.removeEventListener('touchend', onMouseUp);\r\n  }\r\n  \r\n  function updateColorRange() {\r\n    const minLeft = minBlock.value.offsetLeft;\r\n    const maxLeft = maxBlock.value.offsetLeft;\r\n    colorRangeStyle.left = `${minLeft}px`;\r\n    colorRangeStyle.width = `${maxLeft - minLeft}px`;\r\n  }\r\n  \r\n  function onInputChange(type) {\r\n    const sliderWidth = getCoords(sliderContainer.value).width;\r\n    const blockWidth = minBlock.value.offsetWidth;\r\n  \r\n    if (type === 'min') {\r\n      const newLeft = ((minValue.value - rangeMin) / (rangeMax - rangeMin)) * sliderWidth;\r\n      minBlock.value.style.left = `${Math.max(0, Math.min(newLeft, sliderWidth - blockWidth))}px`;\r\n    } else {\r\n      const newLeft = ((maxValue.value - rangeMin) / (rangeMax - rangeMin)) * sliderWidth;\r\n      maxBlock.value.style.left = `${Math.max(0, Math.min(newLeft, sliderWidth - blockWidth))}px`;\r\n    }\r\n    updateColorRange();\r\n  }\r\n  \r\n  onMounted(() => {\r\n    updateColorRange();\r\n  });\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .filter {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  .price-inputs {\r\n    display: flex;\r\n    gap: 20px;\r\n    margin-bottom: 10px;\r\n  }\r\n  .slider {\r\n    position: relative;\r\n    width: 300px;\r\n    height: 10px;\r\n    background: #ddd;\r\n    border-radius: 5px;\r\n    margin-top: 20px;\r\n  }\r\n  .block-min, .block-max {\r\n    position: absolute;\r\n    top: -5px;\r\n    width: 16px;\r\n    height: 16px;\r\n    background: #4CAF50;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n  }\r\n  .color-range {\r\n    position: absolute;\r\n    top: 0;\r\n    height: 10px;\r\n    background: #4CAF50;\r\n  }\r\n  </style>\r\n  "],"mappings":";;EACSA,KAAK,EAAC;AAAQ;;EAGVA,KAAK,EAAC;AAAc;;EAUpBC,EAAE,EAAC,QAAQ;EAACD,KAAK,EAAC,QAAQ;EAACE,GAAG,EAAC;;;uBAbxCC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,mBAAA,CA2BM,c,4BA1BJA,mBAAA,CAAmB,cAAb,QAAM,sBACZA,mBAAA,CASM,OATNC,UASM,GARJD,mBAAA,CAGQ,gB,0BARlBE,gBAAA,CAKiB,qBAEL,I,gBAAAF,mBAAA,CAAwE;IAAjEG,IAAI,EAAC,QAAQ;IAPhC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAO0CC,MAAA,CAAAC,QAAQ,GAAAF,MAAA;IAAGG,OAAK,EAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAG,aAAa;iEAA/BH,MAAA,CAAAC,QAAQ,E,KAExCP,mBAAA,CAGQ,gB,0BAZlBE,gBAAA,CASiB,sBAEL,I,gBAAAF,mBAAA,CAAwE;IAAjEG,IAAI,EAAC,QAAQ;IAXhC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAW0CC,MAAA,CAAAI,QAAQ,GAAAL,MAAA;IAAGG,OAAK,EAAAJ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAG,aAAa;iEAA/BH,MAAA,CAAAI,QAAQ,E,OAG1CV,mBAAA,CAcM,OAdNW,UAcM,GAbJX,mBAAA,CAKO;IAJLL,KAAK,EAAC,WAAW;IACjBE,GAAG,EAAC,UAAU;IACbe,WAAS,EAAAR,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAO,cAAc;IACzBC,YAAU,EAAAV,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAO,cAAc;kDAE7Bb,mBAAA,CAAwD;IAAnDL,KAAK,EAAC,aAAa;IAAEoB,KAAK,EArBzCC,eAAA,CAqB2CV,MAAA,CAAAW,eAAe;2BAChDjB,mBAAA,CAKO;IAJLL,KAAK,EAAC,WAAW;IACjBE,GAAG,EAAC,UAAU;IACbe,WAAS,EAAAR,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAO,cAAc;IACzBC,YAAU,EAAAV,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAO,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}