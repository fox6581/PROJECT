{"ast":null,"code":"import { ref, reactive, onMounted } from 'vue';\nconst rangeMin = 0;\nconst rangeMax = 5;\nexport default {\n  __name: 'MenuPrice',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const sliderContainer = ref(null);\n    const minBlock = ref(null);\n    const maxBlock = ref(null);\n    const colorRangeStyle = reactive({\n      left: '0px',\n      width: '100px'\n    });\n    const minValue = ref(0);\n    const maxValue = ref(5);\n    let activeElement = null;\n    function startMoveRange(type) {\n      activeElement = type;\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n      document.addEventListener('touchmove', onMouseMove);\n      document.addEventListener('touchend', onMouseUp);\n    }\n    function getCoords(elem) {\n      const coords = elem.getBoundingClientRect();\n      return {\n        left: coords.left + window.pageXOffset,\n        width: coords.width\n      };\n    }\n    function onMouseMove(e) {\n      const sliderCoords = getCoords(sliderContainer.value);\n      const blockCoords = activeElement === 'min' ? getCoords(maxBlock.value) : getCoords(minBlock.value);\n      let posX = e.touches ? e.touches[0].clientX : e.clientX;\n      let newLeft = posX - sliderCoords.left;\n      if (activeElement === 'min') {\n        newLeft = Math.max(0, Math.min(newLeft, blockCoords.left - sliderCoords.left - minBlock.value.offsetWidth));\n        minBlock.value.style.left = `${newLeft}px`;\n        minValue.value = newLeft / sliderCoords.width * (rangeMax - rangeMin) + rangeMin;\n      } else {\n        newLeft = Math.min(sliderCoords.width - maxBlock.value.offsetWidth, Math.max(newLeft, blockCoords.left - sliderCoords.left));\n        maxBlock.value.style.left = `${newLeft}px`;\n        maxValue.value = newLeft / sliderCoords.width * (rangeMax - rangeMin) + rangeMin;\n      }\n      updateColorRange();\n    }\n    function onMouseUp() {\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('touchmove', onMouseMove);\n      document.removeEventListener('touchend', onMouseUp);\n    }\n    function updateColorRange() {\n      const minLeft = minBlock.value.offsetLeft;\n      const maxLeft = maxBlock.value.offsetLeft;\n      colorRangeStyle.left = `${minLeft}px`;\n      colorRangeStyle.width = `${maxLeft - minLeft}px`;\n    }\n    onMounted(() => {\n      updateColorRange();\n    });\n    const __returned__ = {\n      sliderContainer,\n      minBlock,\n      maxBlock,\n      colorRangeStyle,\n      minValue,\n      maxValue,\n      rangeMin,\n      rangeMax,\n      get activeElement() {\n        return activeElement;\n      },\n      set activeElement(v) {\n        activeElement = v;\n      },\n      startMoveRange,\n      getCoords,\n      onMouseMove,\n      onMouseUp,\n      updateColorRange,\n      ref,\n      reactive,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","rangeMin","rangeMax","sliderContainer","minBlock","maxBlock","colorRangeStyle","left","width","minValue","maxValue","activeElement","startMoveRange","type","document","addEventListener","onMouseMove","onMouseUp","getCoords","elem","coords","getBoundingClientRect","window","pageXOffset","e","sliderCoords","value","blockCoords","posX","touches","clientX","newLeft","Math","max","min","offsetWidth","style","updateColorRange","removeEventListener","minLeft","offsetLeft","maxLeft"],"sources":["C:/shopvue/front-vue3/src/components/Menu/MenuPrice.vue"],"sourcesContent":["<template>\r\n    <div class=\"filter\">\r\n      <div>\r\n        <span>Фильтр</span>\r\n        <div>\r\n          <number>0</number>\r\n          <number>5</number>\r\n        </div>\r\n        <div id=\"rating\" class=\"slider\" ref=\"sliderContainer\">\r\n          <div\r\n            class=\"block-min\"\r\n            ref=\"minBlock\"\r\n            @mousedown=\"startMoveRange('min')\"\r\n            @touchstart=\"startMoveRange('min')\"\r\n          ></div>\r\n          <div class=\"color-range\" :style=\"colorRangeStyle\"></div>\r\n          <div\r\n            class=\"block-max\"\r\n            ref=\"maxBlock\"\r\n            @mousedown=\"startMoveRange('max')\"\r\n            @touchstart=\"startMoveRange('max')\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, reactive, onMounted } from 'vue';\r\n  \r\n  const sliderContainer = ref(null);\r\n  const minBlock = ref(null);\r\n  const maxBlock = ref(null);\r\n  const colorRangeStyle = reactive({ left: '0px', width: '100px' });\r\n  \r\n  const minValue = ref(0);\r\n  const maxValue = ref(5);\r\n  const rangeMin = 0;\r\n  const rangeMax = 5;\r\n  \r\n  let activeElement = null;\r\n  \r\n  function startMoveRange(type) {\r\n    activeElement = type;\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n    document.addEventListener('touchmove', onMouseMove);\r\n    document.addEventListener('touchend', onMouseUp);\r\n  }\r\n  \r\n  function getCoords(elem) {\r\n    const coords = elem.getBoundingClientRect();\r\n    return {\r\n      left: coords.left + window.pageXOffset,\r\n      width: coords.width\r\n    };\r\n  }\r\n  \r\n  function onMouseMove(e) {\r\n    const sliderCoords = getCoords(sliderContainer.value);\r\n    const blockCoords = activeElement === 'min' ? getCoords(maxBlock.value) : getCoords(minBlock.value);\r\n    let posX = e.touches ? e.touches[0].clientX : e.clientX;\r\n    let newLeft = posX - sliderCoords.left;\r\n  \r\n    if (activeElement === 'min') {\r\n      newLeft = Math.max(0, Math.min(newLeft, blockCoords.left - sliderCoords.left - minBlock.value.offsetWidth));\r\n      minBlock.value.style.left = `${newLeft}px`;\r\n      minValue.value = (newLeft / sliderCoords.width) * (rangeMax - rangeMin) + rangeMin;\r\n    } else {\r\n      newLeft = Math.min(sliderCoords.width - maxBlock.value.offsetWidth, Math.max(newLeft, blockCoords.left - sliderCoords.left));\r\n      maxBlock.value.style.left = `${newLeft}px`;\r\n      maxValue.value = (newLeft / sliderCoords.width) * (rangeMax - rangeMin) + rangeMin;\r\n    }\r\n  \r\n    updateColorRange();\r\n  }\r\n  \r\n  function onMouseUp() {\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseup', onMouseUp);\r\n    document.removeEventListener('touchmove', onMouseMove);\r\n    document.removeEventListener('touchend', onMouseUp);\r\n  }\r\n  \r\n  function updateColorRange() {\r\n    const minLeft = minBlock.value.offsetLeft;\r\n    const maxLeft = maxBlock.value.offsetLeft;\r\n    colorRangeStyle.left = `${minLeft}px`;\r\n    colorRangeStyle.width = `${maxLeft - minLeft}px`;\r\n  }\r\n  \r\n  onMounted(() => {\r\n    updateColorRange();\r\n  });\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .filter {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  .slider {\r\n    position: relative;\r\n    width: 300px;\r\n    height: 10px;\r\n    background: #ddd;\r\n    border-radius: 5px;\r\n    margin-top: 20px;\r\n  }\r\n  .block-min, .block-max {\r\n    position: absolute;\r\n    top: -5px;\r\n    width: 16px;\r\n    height: 16px;\r\n    background: #4CAF50;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n  }\r\n  .color-range {\r\n    position: absolute;\r\n    top: 0;\r\n    height: 10px;\r\n    background: #4CAF50;\r\n  }\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}