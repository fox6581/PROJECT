{"ast":null,"code":"import { createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[0] || (_cache[0] = _createElementVNode(\"h2\", null, \"Discounts up to -20%\", -1 /* HOISTED */)), _createVNode($setup[\"ProductCart\"], {\n    products: $setup.discountedProducts,\n    apiUrl: $setup.apiUrl\n  }, null, 8 /* PROPS */, [\"products\", \"apiUrl\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createElementVNode","_createVNode","$setup","products","discountedProducts","apiUrl"],"sources":["C:\\shopvue\\front-vue3\\src\\components\\Home\\DiscountP50.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>Discounts up to -20%</h2>\r\n\r\n    <ProductCart :products=\"discountedProducts\" :apiUrl=\"apiUrl\" />\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport ProductCart from '../Products/ProductCart.vue';\r\nimport { API_BASE_URL } from '@/config';\r\n\r\n// Храним товары и базовый URL для API\r\nconst products = ref([]);\r\nconst apiUrl = API_BASE_URL;\r\n\r\n// Храним продукты со скидкой 50% и более\r\nconst discountedProducts = computed(() => {\r\n  return products.value.filter(product => {\r\n    if (product.discount_price && product.price) {\r\n      const discount = (product.price - product.discount_price) / product.price * 100;\r\n      return discount >= 20;  // Скидка 50% или более\r\n    }\r\n    return false;  // Нет скидки или цена не указана\r\n  });\r\n});\r\n\r\nconst fetchProducts = async () => {\r\n  try {\r\n    const response = await fetch(`${apiUrl}/api/products`);\r\n    if (!response.ok) throw new Error('Ошибка при получении данных');\r\n    const data = await response.json();\r\n    products.value = data;\r\n  } catch (error) {\r\n    console.error('Ошибка:', error);\r\n  }\r\n};\r\n\r\nonMounted(fetchProducts);\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n  padding: 60px 0;\r\n\r\n  h2 {\r\n\r\n    font-family: ABeeZee;\r\n    font-size: 24px;\r\n    font-style: italic;\r\n    font-weight: 400;\r\n    line-height: 32px;\r\n    text-align: center;\r\n\r\n  }\r\n}\r\n\r\n@media(width<780px) {\r\n  .conteiner {\r\n    .container[data-v-3c233694] {\r\n      width: 200px;\r\n      /* min-width: 200px; */\r\n      /* padding: 24px 16px; */\r\n      gap: 16px;\r\n      border-radius: 9px;\r\n      background: #F6F6F6;\r\n      display: block;\r\n    }\r\n  }\r\n}\r\n</style>"],"mappings":";;uBACEA,mBAAA,CAMM,c,0BALJC,mBAAA,CAA6B,YAAzB,sBAAoB,sBAExBC,YAAA,CAA+DC,MAAA;IAAjDC,QAAQ,EAAED,MAAA,CAAAE,kBAAkB;IAAGC,MAAM,EAAEH,MAAA,CAAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}