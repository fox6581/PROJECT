{"ast":null,"code":"import { ref, reactive, watch, onMounted } from 'vue';\nexport default {\n  __name: 'MenuPrice',\n  props: {\n    initialMinValue: {\n      type: Number,\n      default: 100\n    },\n    initialMaxValue: {\n      type: Number,\n      default: 1000\n    },\n    rangeMin: {\n      type: Number,\n      default: 0\n    },\n    rangeMax: {\n      type: Number,\n      default: 10000\n    }\n  },\n  emits: ['update:filter'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const sliderContainer = ref(null);\n    const minBlock = ref(null);\n    const maxBlock = ref(null);\n    const colorRangeStyle = reactive({\n      left: '0px',\n      width: '100px'\n    });\n    const minValue = ref(props.initialMinValue);\n    const maxValue = ref(props.initialMaxValue);\n    let activeElement = null;\n    function startMoveRange(type) {\n      activeElement = type;\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n      document.addEventListener('touchmove', onMouseMove);\n      document.addEventListener('touchend', onMouseUp);\n    }\n    function getCoords(elem) {\n      const coords = elem.getBoundingClientRect();\n      return {\n        left: coords.left + window.pageXOffset,\n        width: coords.width\n      };\n    }\n    function onMouseMove(e) {\n      const sliderCoords = getCoords(sliderContainer.value);\n      let posX = e.touches ? e.touches[0].clientX : e.clientX;\n      let newLeft = posX - sliderCoords.left;\n      if (activeElement === 'min') {\n        const maxLeft = getCoords(maxBlock.value).left - sliderCoords.left - minBlock.value.offsetWidth;\n        newLeft = Math.max(0, Math.min(newLeft, maxLeft));\n        minBlock.value.style.left = `${newLeft}px`;\n        minValue.value = (newLeft / sliderCoords.width * (props.rangeMax - props.rangeMin) + props.rangeMin).toFixed(1);\n      } else {\n        const minLeft = getCoords(minBlock.value).left - sliderCoords.left;\n        newLeft = Math.min(sliderCoords.width - maxBlock.value.offsetWidth, Math.max(newLeft, minLeft));\n        maxBlock.value.style.left = `${newLeft}px`;\n        maxValue.value = (newLeft / sliderCoords.width * (props.rangeMax - props.rangeMin) + props.rangeMin).toFixed(1);\n      }\n      updateColorRange();\n    }\n    function onMouseUp() {\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('touchmove', onMouseMove);\n      document.removeEventListener('touchend', onMouseUp);\n    }\n    function updateColorRange() {\n      const minLeft = minBlock.value.offsetLeft;\n      const maxLeft = maxBlock.value.offsetLeft;\n      colorRangeStyle.left = `${minLeft}px`;\n      colorRangeStyle.width = `${maxLeft - minLeft}px`;\n    }\n    function onInputChange(type) {\n      const sliderWidth = getCoords(sliderContainer.value).width;\n      const blockWidth = minBlock.value.offsetWidth;\n      if (type === 'min') {\n        const newLeft = (minValue.value - props.rangeMin) / (props.rangeMax - props.rangeMin) * sliderWidth;\n        minBlock.value.style.left = `${Math.max(0, Math.min(newLeft, sliderWidth - blockWidth))}px`;\n      } else {\n        const newLeft = (maxValue.value - props.rangeMin) / (props.rangeMax - props.rangeMin) * sliderWidth;\n        maxBlock.value.style.left = `${Math.max(0, Math.min(newLeft, sliderWidth - blockWidth))}px`;\n      }\n      updateColorRange();\n    }\n\n    // Отправляем значения фильтра\n    const emit = __emit;\n    watch([minValue, maxValue], ([newMin, newMax]) => {\n      emit('update:filter', {\n        min: newMin,\n        max: newMax\n      });\n    });\n    onMounted(() => {\n      updateColorRange();\n    });\n    const __returned__ = {\n      props,\n      sliderContainer,\n      minBlock,\n      maxBlock,\n      colorRangeStyle,\n      minValue,\n      maxValue,\n      get activeElement() {\n        return activeElement;\n      },\n      set activeElement(v) {\n        activeElement = v;\n      },\n      startMoveRange,\n      getCoords,\n      onMouseMove,\n      onMouseUp,\n      updateColorRange,\n      onInputChange,\n      emit,\n      ref,\n      reactive,\n      watch,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","watch","onMounted","props","__props","sliderContainer","minBlock","maxBlock","colorRangeStyle","left","width","minValue","initialMinValue","maxValue","initialMaxValue","activeElement","startMoveRange","type","document","addEventListener","onMouseMove","onMouseUp","getCoords","elem","coords","getBoundingClientRect","window","pageXOffset","e","sliderCoords","value","posX","touches","clientX","newLeft","maxLeft","offsetWidth","Math","max","min","style","rangeMax","rangeMin","toFixed","minLeft","updateColorRange","removeEventListener","offsetLeft","onInputChange","sliderWidth","blockWidth","emit","__emit","newMin","newMax"],"sources":["C:/shopvue/front-vue3/src/components/Menu/MenuPrice.vue"],"sourcesContent":["<template>\r\n    <div class=\"filter\">\r\n      <div>\r\n        <span>Фильтр</span>\r\n        <div class=\"price-inputs\">\r\n          <label>\r\n            Минимальная цена:\r\n            <input type=\"number\" v-model=\"minValue\" @input=\"onInputChange('min')\" />\r\n          </label>\r\n          <label>\r\n            Максимальная цена:\r\n            <input type=\"number\" v-model=\"maxValue\" @input=\"onInputChange('max')\" />\r\n          </label>\r\n        </div>\r\n        <div id=\"rating\" class=\"slider\" ref=\"sliderContainer\">\r\n          <div\r\n            class=\"block-min\"\r\n            ref=\"minBlock\"\r\n            @mousedown=\"startMoveRange('min')\"\r\n            @touchstart=\"startMoveRange('min')\"\r\n          ></div>\r\n          <div class=\"color-range\" :style=\"colorRangeStyle\"></div>\r\n          <div\r\n            class=\"block-max\"\r\n            ref=\"maxBlock\"\r\n            @mousedown=\"startMoveRange('max')\"\r\n            @touchstart=\"startMoveRange('max')\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, reactive, watch, onMounted, defineProps, defineEmits} from 'vue';\r\n  \r\n  const props = defineProps({\r\n    initialMinValue: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    initialMaxValue: {\r\n      type: Number,\r\n      default: 1000\r\n    },\r\n    rangeMin: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    rangeMax: {\r\n      type: Number,\r\n      default: 10000\r\n    }\r\n  });\r\n  \r\n  \r\n  const sliderContainer = ref(null);\r\n  const minBlock = ref(null);\r\n  const maxBlock = ref(null);\r\n  const colorRangeStyle = reactive({ left: '0px', width: '100px' });\r\n  \r\n  const minValue = ref(props.initialMinValue);\r\n  const maxValue = ref(props.initialMaxValue);\r\n  \r\n  let activeElement = null;\r\n  \r\n  function startMoveRange(type) {\r\n    activeElement = type;\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n    document.addEventListener('touchmove', onMouseMove);\r\n    document.addEventListener('touchend', onMouseUp);\r\n  }\r\n  \r\n  function getCoords(elem) {\r\n    const coords = elem.getBoundingClientRect();\r\n    return {\r\n      left: coords.left + window.pageXOffset,\r\n      width: coords.width\r\n    };\r\n  }\r\n  \r\n  function onMouseMove(e) {\r\n  const sliderCoords = getCoords(sliderContainer.value);\r\n  let posX = e.touches ? e.touches[0].clientX : e.clientX;\r\n  let newLeft = posX - sliderCoords.left;\r\n\r\n  if (activeElement === 'min') {\r\n    const maxLeft = getCoords(maxBlock.value).left - sliderCoords.left - minBlock.value.offsetWidth;\r\n    newLeft = Math.max(0, Math.min(newLeft, maxLeft));\r\n    minBlock.value.style.left = `${newLeft}px`;\r\n    minValue.value = ((newLeft / sliderCoords.width) * (props.rangeMax - props.rangeMin) + props.rangeMin).toFixed(1);\r\n  } else {\r\n    const minLeft = getCoords(minBlock.value).left - sliderCoords.left;\r\n    newLeft = Math.min(sliderCoords.width - maxBlock.value.offsetWidth, Math.max(newLeft, minLeft));\r\n    maxBlock.value.style.left = `${newLeft}px`;\r\n    maxValue.value = ((newLeft / sliderCoords.width) * (props.rangeMax - props.rangeMin) + props.rangeMin).toFixed(1);\r\n  }\r\n\r\n  updateColorRange();\r\n}\r\n\r\n  \r\n  function onMouseUp() {\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseup', onMouseUp);\r\n    document.removeEventListener('touchmove', onMouseMove);\r\n    document.removeEventListener('touchend', onMouseUp);\r\n  }\r\n  \r\n  function updateColorRange() {\r\n    const minLeft = minBlock.value.offsetLeft;\r\n    const maxLeft = maxBlock.value.offsetLeft;\r\n    colorRangeStyle.left = `${minLeft}px`;\r\n    colorRangeStyle.width = `${maxLeft - minLeft}px`;\r\n  }\r\n  \r\n  function onInputChange(type) {\r\n    const sliderWidth = getCoords(sliderContainer.value).width;\r\n    const blockWidth = minBlock.value.offsetWidth;\r\n  \r\n    if (type === 'min') {\r\n      const newLeft = ((minValue.value - props.rangeMin) / (props.rangeMax - props.rangeMin)) * sliderWidth;\r\n      minBlock.value.style.left = `${Math.max(0, Math.min(newLeft, sliderWidth - blockWidth))}px`;\r\n    } else {\r\n      const newLeft = ((maxValue.value - props.rangeMin) / (props.rangeMax - props.rangeMin)) * sliderWidth;\r\n      maxBlock.value.style.left = `${Math.max(0, Math.min(newLeft, sliderWidth - blockWidth))}px`;\r\n    }\r\n    updateColorRange();\r\n  }\r\n  \r\n  // Отправляем значения фильтра\r\n  const emit = defineEmits(['update:filter']);\r\n  watch([minValue, maxValue], ([newMin, newMax]) => {\r\n    emit('update:filter', { min: newMin, max: newMax });\r\n  });\r\n  \r\n  onMounted(() => {\r\n    updateColorRange();\r\n  });\r\n  </script>\r\n  \r\n\r\n  \r\n  \r\n  <style scoped>\r\n  .filter {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  .price-inputs {\r\n    display: flex;\r\n    gap: 20px;\r\n    margin-bottom: 10px;\r\n  }\r\n  .slider {\r\n    position: relative;\r\n    width: 300px;\r\n    height: 10px;\r\n    background: #ddd;\r\n    border-radius: 5px;\r\n    margin-top: 20px;\r\n  }\r\n  .block-min, .block-max {\r\n    position: absolute;\r\n    top: -5px;\r\n    width: 16px;\r\n    height: 16px;\r\n    background: #4CAF50;\r\n    border-radius: 50%;\r\n    cursor: pointer;\r\n  }\r\n  .color-range {\r\n    position: absolute;\r\n    top: 0;\r\n    height: 10px;\r\n    background: #4CAF50;\r\n  }\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}